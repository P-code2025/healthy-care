[build]
builder = "nixpacks"
buildCommand = "npm ci --only=production"

[deploy]
startCommand = "node api-proxy.js"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Tell Railway to use the server folder as the root
# This prevents it from detecting the frontend Vite project
[service]
rootDirectory = "/server"
